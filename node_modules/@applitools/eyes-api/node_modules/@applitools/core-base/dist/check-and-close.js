"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.makeCheckAndClose = void 0;
const transform_image_1 = require("./utils/transform-image");
function makeCheckAndClose({ requests, logger: defaultLogger }) {
    return async function checkAndClose({ target, settings, logger = defaultLogger, }) {
        logger.log('Command "checkAndClose" is called with settings', settings);
        if (!target.isTransformed) {
            target.image = await (0, transform_image_1.transformImage)({ image: target.image, settings });
        }
        const results = await requests.checkAndClose({ target, settings, logger });
        return results;
    };
}
exports.makeCheckAndClose = makeCheckAndClose;
